"use strict";angular.module("API",["ngRoute"]).constant("$api",{flickr:"cf8f1cf4fdd37bce0498531da5f31ed1"}),angular.module("mkm.flickr",["ngRoute","API","ngMaterial"]).service("restAPI",["$http","$api",function($http,$api){function _getPhotoset(setid){return $http.jsonp("https://api.flickr.com/services/rest/",{cache:!1,params:{jsoncallback:"JSON_CALLBACK",method:"flickr.photosets.getPhotos",api_key:apiKey,photoset_id:setid,extras:"description",format:"json"}})}function _getRecent(userid){return $http.jsonp("https://api.flickr.com/services/rest/",{cache:!1,params:{jsoncallback:"JSON_CALLBACK",method:"flickr.people.getPhotos",user_id:userid,api_key:apiKey,extras:"o_dims,description",format:"json",per_page:500}})}function _getImg(imgid){return $http.jsonp("https://api.flickr.com/services/rest/",{cache:!1,params:{jsoncallback:"JSON_CALLBACK",method:"flickr.photos.getInfo",api_key:apiKey,photo_id:imgid,format:"json"}})}var apiKey=$api.flickr;return{getPhotoset:_getPhotoset,getRecent:_getRecent,getImg:_getImg}}]),angular.module("mkm.flickr").directive("recentPhotos",["restAPI","$mdPanel",function($flickr,$mdPanel){function link(scope){function photoDetailCtrl($scope,mdPanelRef,photoDetail,detailIndex,photos){function photoDetailSet(ind){$scope.photoDetail=$scope.photos[ind]}$scope._mdPanelRef=mdPanelRef,$scope.photoDetail=photoDetail,$scope.detailIndex=detailIndex,$scope.photos=photos,$scope.detailClose=function(){this._mdPanelRef.close().then(function(){angular.element(document.querySelector(".recent-tile")).focus()})},$scope.detailNext=function(){$scope.detailIndex++,photoDetailSet($scope.detailIndex)},$scope.detailPrev=function(){$scope.detailIndex--,photoDetailSet($scope.detailIndex)}}scope.detailPanel=$mdPanel,scope.detailIndex=null,scope.photoDetail=null,scope.thumbnailsShow=[],scope.recent=[],scope.photoStep=scope.photoStep||5,scope.photoCount=scope.countInit-scope.photoStep||0;var photoData=new $flickr.getRecent(scope.flickrID);photoData.then(function(data){scope.recent=data.data.photos.photo,scope.thumbnailsAdd()}),scope.thumbnailsAdd=function(){scope.photoCount+=scope.photoStep,scope.thumbnailsShow=scope.recent.slice(0,scope.photoCount)},scope.thumbnailClick=function($event,img,ind){scope.photoDetail=img;var position=this.detailPanel.newPanelPosition().absolute().center();this.detailPanel.open({attachTo:angular.element(document.body),controller:photoDetailCtrl,controllerAs:"ctrl",disableParentScroll:!0,templateUrl:"flickr/flickr-photo-detail.html",hasBackdrop:!0,panelClass:"flickr-photo-detail",position:position,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0,targetEvent:$event,locals:{photoDetail:scope.photoDetail,detailIndex:ind,photos:scope.thumbnailsShow}})}}return{link:link,templateUrl:function(element){return element.attr("new-view")||"flickr/flickr-recent.html"},restrict:"E",scope:{flickrID:"=flickrId",countInit:"=count",step:"=step"}}}]),angular.module("mkm.flickr").directive("flickrAlbum",["restAPI","$mdPanel",function($flickr,$mdPanel){function link(scope){function photoDetailCtrl($scope,mdPanelRef,photoDetail,detailIndex,photos){function photoDetailSet(ind){$scope.photoDetail=$scope.photos[ind]}$scope._mdPanelRef=mdPanelRef,$scope.photoDetail=photoDetail,$scope.detailIndex=detailIndex,$scope.photos=photos,$scope.detailClose=function(){this._mdPanelRef.close().then(function(){angular.element(document.querySelector(".recent-tile")).focus()})},$scope.detailNext=function(){$scope.detailIndex++,photoDetailSet($scope.detailIndex)},$scope.detailPrev=function(){$scope.detailIndex--,photoDetailSet($scope.detailIndex)}}scope.detailPanel=$mdPanel;var galleryID=scope.albumId,galleryData=new $flickr.getPhotoset(galleryID);galleryData.then(function(data){scope.gallery=data.data}),scope.photoDetail=null,scope.photoDetailIndx=null,scope.thumbClick=function($event,img,ind){scope.photoDetail=img;var position=this.detailPanel.newPanelPosition().absolute().center();this.detailPanel.open({attachTo:angular.element(document.body),controller:photoDetailCtrl,controllerAs:"ctrl",disableParentScroll:!0,templateUrl:"flickr/flickr-photo-detail.html",hasBackdrop:!0,panelClass:"flickr-photo-detail",position:position,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0,targetEvent:$event,locals:{photoDetail:scope.photoDetail,detailIndex:ind,photos:scope.gallery.photoset.photo}})}}return{templateUrl:function(element){return element.attr("new-view")||"flickr/flickr-album.html"},scope:{albumId:"=albumId"},link:link}}]),angular.module("mkm.flickr").directive("flickrImg",[function(){return{templateUrl:function(element){return element.attr("new-view")||"flickr/flickr-img.html"},restrict:"E",link:function(scope){scope.size="b",window.onresize=function(){scope.$digest()}},scope:{img:"=info"}}}]),angular.module("demoApp",["ngAnimate","ngRoute","ngSanitize","ngMaterial","mkm.flickr"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("demoApp").controller("MainCtrl",["$scope",function($scope){$scope.albumID="72157642607219393",$scope.flickrID="91631856@N00"}]),angular.module("demoApp").run(["$templateCache",function($templateCache){$templateCache.put("views/about.html","<p>This is the about view.</p>"),$templateCache.put("views/main.html",'<md-content flex="100" class="main-page"> <h1>Angularjs Integrations for Flickr</h1> <div class="creative-commons"> <p><a href="https://github.com/kylemoseby/angular-flickr-integrations" target="_blank"><span class="icon-github"></span></a>&nbsp; <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a> </p> <p><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource" property="dct:title" rel="dct:type">Flickr Integrations in Angular</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://kylemoseby.com" property="cc:attributionName" rel="cc:attributionURL">Kyle Moseby</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p> <p>Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/kylemoseby/angular-flickr-integrations" rel="dct:source">https://github.com/kylemoseby/angular-flickr-integrations</a>.</p> </div> <br> <h2>Run with Grunt</h2> <p>Download the <a href="https://github.com/kylemoseby/angular-flickr-integrations">project</a> and run <kbd>grunt serve</kbd> </p> <h2>Dependencies</h2> <p>Dependencies are maintained using <a href="https://bower.io/" target="_blank">Bower</a>. A list of dependencies can be found in the bower.json file in the projects root directory. To update run: <kbd>bower update</kbd> </p> <h2>Setup</h2> <p>Include the file "source/angular-flickr-integrations.js " found in the root of this project. Individual js files can be found at "app/flick/flickr-***.js ". Then load the module <code>mkm.flickr</code> in your app.</p> <pre>angular\n  .module(\'demoApp\', [\n    \'ngAnimate\',\n    \'ngRoute\',\n    \'ngSanitize\',\n    \'ngTouch\',\n    \'mkm.flickr\'\n  ]);</pre> <h3>Views</h3> <p>Each directive has one HTML file associated with it. The default view location is /flickr/flickr-****.html. This can be overwritten using the "new-view ".</p> <pre>&lt;flickr-album album-id=&quot;foo&quot; new-view=&quot;bar/view.html&quot;&gt;&lt;/flickr-album&gt;</pre> <ul> <li>flickr-album.html</li> <li>flickr-img.html</li> <li>flickr-recent.html</li> </ul> <h2>Demos:</h2> <h3>Flickr Album</h3> <pre>&lt;flickr-album album-id=&quot;albumID&quot;&gt;&lt;/flickr-album&gt;</pre> <div class="alert alert-info" role="alert"> The attribute "album-id" is passed with call to <a ng-href="https://www.flickr.com/services/api/flickr.people.getPhotos.html" target="_blank">flickr.people.getPhotos</a> as "user_id". </div> <br> <div class="well well-lg"> <flickr-album album-id="albumID"></flickr-album> </div> <h3>Recent Photos</h3> <pre>&lt;recent-photos flickr-id=&quot;recent&quot;&gt;&lt;/recent-photos&gt;</pre> <div class="alert alert-info" role="alert "> The attribute "flickr-id " is passed with call to <a ng-href="https://www.flickr.com/services/api/flickr.photosets.getPhotos.html " target="_blank ">flickr.photosets.getPhotos</a> as "photoset_id ". </div> <div class="well well-lg"> <recent-photos flickr-id="flickrID " count="20 "></recent-photos> </div> <ul class="list-inline"> <li> <a href="https://github.com/kylemoseby/angular-flickr-integrations" target="_blank"><span class="icon-github"></span></a> </li> <li> <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a> </li> </ul> </md-content>')}]);